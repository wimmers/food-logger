(this["webpackJsonpfood-logger"]=this["webpackJsonpfood-logger"]||[]).push([[0],{35:function(e,t,n){},36:function(e,t,n){},78:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n(0),i=n.n(r),o=n(11),a=n.n(o),s=(n(35),n(10)),l=(n(36),n(16)),d=n(28),u=n(26),j=n(85),h=n(82),b=n(83),f=n(86),m=n(84),p=n(8),g=n(22),O=n(7),x=n(37),v=[48.1351,11.582],k=(new p.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-black.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png"}),new p.Icon.Default({className:"huechange-190"})),w=new p.Icon.Default({className:"huechange-140"}),y=new p.Icon.Default({className:"huechange-280"}),S=new p.Icon.Default;var M=function(e){var t=e.onUpdateMarkets,n=e.supermarkets,i=e.selectedMarkets,o=e.setMap,a=Object(r.useState)(null),l=Object(s.a)(a,2),d=l[0],p=l[1],M=function(e){t(e)};function C(){return Object(u.b)({click:function(e){p(e.latlng)},locationfound:function(e){console.log("location found:",e)}}),null}return Object(c.jsxs)(b.a,{center:v,zoom:13,scrollWheelZoom:!1,style:{height:"100%",width:"100%"},children:[Object(c.jsx)(f.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object(c.jsx)(C,{}),Object(c.jsx)(m.a,{children:function(e){return console.log("map center:",e.getCenter()),o(e),null}}),Object(c.jsx)(j.a,{position:v,icon:w,children:Object(c.jsxs)(h.a,{children:["This is Munich on OSM. ",Object(c.jsx)("br",{})," Try to click somewhere else."]})}),d?Object(c.jsx)(j.a,{position:d,icon:k,children:Object(c.jsx)(h.a,{children:Object(c.jsx)(g.a,{variant:"outline-primary",onClick:function(){var e=d;if(null!==e){var t="\n            [out:json][timeout:25];\n            node\n                [shop=supermarket]\n                (around:1000, ".concat(e.lat,", ").concat(e.lng,");\n                out;\n        ");x(t,{fetchMode:"cors"}).then(M).catch(console.error)}},children:"Find shops around here"})})}):null,function(){if(null===n)return null;return n.map((function(e,t,n){return function(e){var t=[e.lat,e.lon],n=e.tags,r=function(e){return void 0!==e?e:""},o="".concat(r(n["addr:street"])," ").concat(r(n["addr:housenumber"]),",\n            ").concat(r(n["addr:postcode"])," ").concat(r(n["addr:city"]),"\n            "),a=i.includes(e.id)?y:S;return Object(c.jsx)(j.a,{position:t,icon:a,children:Object(c.jsx)(h.a,{children:Object(c.jsx)(O.a,{children:Object(c.jsxs)(O.a.Body,{children:[Object(c.jsx)(O.a.Title,{children:n.name?n.name:"Unknown"}),n.brand?Object(c.jsx)(O.a.Text,{children:"Brand: "+n.brand}):null,void 0!==n["addr:street"]?Object(c.jsxs)(O.a.Text,{children:[o," "]}):null,Object(c.jsx)(g.a,{variant:"outline-primary",onClick:function(t){return M([e])},children:"Find products at this shop"})]})})})},e.id.toString())}(e)}))}()]})},C=n(17),T=n(27),I={0:{name:"Vegan blu",description:"A vegan blue cheese"},1:{name:"Simply V w\xfcrzige Genie\xdferscheiben",description:"The best",image:"https://static.openfoodfacts.org/images/products/426/044/496/0339/front_de.7.full.jpg"},3:{name:"Primitivo goes vegan",description:"reddish goodness"},4:{name:"Chardonnay vegan",description:"weird mix of white grapes"}},P=[{name:"Cheeses",products:[0,1]},{name:"Wines",products:[3,4]}];function z(e){var t=e.product,n=e.onClick,r=e.selected;return Object(c.jsxs)(O.a,{onClick:n,bg:r?"primary":void 0,text:r?"light":void 0,children:[t.image?Object(c.jsx)(O.a.Img,{variant:"top",src:t.image}):"",Object(c.jsxs)(O.a.Body,{children:[Object(c.jsx)(O.a.Title,{children:t.name}),Object(c.jsx)(O.a.Text,{children:t.description})]})]})}var B=function(e){var t=e.categories,n=e.products,r=e.onSelectProduct,i=e.selectedProduct,o=t.map((function(e,t,o){return Object(c.jsxs)(O.a,{children:[Object(c.jsx)(C.a.Toggle,{as:O.a.Header,eventKey:t.toString(),children:e.name}),Object(c.jsx)(C.a.Collapse,{eventKey:t.toString(),children:Object(c.jsx)(O.a.Body,{children:Object(c.jsx)(T.a,{children:(a=e.products,a.map((function(e){return void 0===n[e]?null:Object(c.jsx)(l.a,{xs:12,md:6,lg:4,children:Object(c.jsx)(z,{product:n[e],onClick:function(){r(e)},selected:i===e})},e)})))})})})]},t);var a}));return Object(c.jsx)(C.a,{defaultActiveKey:"0",children:o})},D=n(29);var F=function(){var e=Object(r.useState)(I),t=Object(s.a)(e,2),n=t[0],i=t[1],o=Object(r.useState)(void 0),a=Object(s.a)(o,2),u=a[0],j=a[1],h=Object(r.useState)(null),b=Object(s.a)(h,2),f=b[0],m=b[1],p=Object(r.useState)([]),g=Object(s.a)(p,2),O=g[0],x=g[1];Object(r.useEffect)((function(){if(null!==f)if(void 0===u)x([]);else{var e=f.map((function(e){return e.id})).filter((function(e){return Math.random()>=.5}));x(e)}}),[u,f]);var v=Object(r.useRef)(null),k=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),w=Math.max(document.documentElement.clientHeight||0,window.innerHeight||0),y=k>=w;return Object(c.jsx)(d.a,{fluid:!0,style:{height:w},children:Object(c.jsxs)(D.a,{sizes:[50,50],id:"container",onDragEnd:function(e){var t=v.current;null!==t&&t.invalidateSize()},direction:y?"horizontal":"vertical",children:[Object(c.jsx)("div",{className:"split",style:{height:"100%",width:"100%"},children:Object(c.jsx)(M,{supermarkets:f,onUpdateMarkets:function(e){m(e),function(e){var t=Object.keys(I).map((function(e){return Number(e)})).filter((function(e){return Math.random()>=.5})),n=t.reduce((function(e,t){return e[t]=I[t],e}),{});void 0===u||t.includes(u)||j(void 0),i(n)}()},selectedMarkets:O,setMap:function(e){return v.current=e}})}),Object(c.jsx)(l.a,{className:"split",children:Object(c.jsx)(B,{products:n,categories:P,selectedProduct:u,onSelectProduct:function(e){j(e===u?void 0:e)}})})]})})},N=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,87)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),c(e),r(e),i(e),o(e)}))};n(77);a.a.render(Object(c.jsx)(i.a.StrictMode,{children:Object(c.jsx)(F,{})}),document.getElementById("root")),N()}},[[78,1,2]]]);
//# sourceMappingURL=main.a28d850e.chunk.js.map